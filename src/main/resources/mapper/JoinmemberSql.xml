<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="data.mapper.JoinmemberMapper">
    <select id="getJoinmemberList" resultType="JoinmemberDto">
        SELECT * from joinmember jm inner join user u on jm.unum = u.unum where jm.jnum=#{jnum} and jaccept=1
    </select>
    <select id="getSubmemberList" resultType="JoinmemberDto">
        SELECT * from joinmember jm inner join user u on jm.unum = u.unum where jm.jnum=#{jnum} and jaccept=0
    </select>
    <select id="getCheckMember" parameterType="Map" resultType="int">
        select count(unum) from joinmember where unum=#{unum} and jnum=#{jnum}
    </select>
    <insert id="joinGaip" parameterType="JoinmemberDto">
        insert into joinmember (unum,jnum,jaccept) values (#{unum},#{jnum},0)
    </insert>
    <delete id="joinCancel" parameterType="int">
        delete from joinmember where unum=#{unum} and jnum=#{jnum}
    </delete>
    <update id="acceptJoin" parameterType="int">
        update joinmember set jaccept=1 where unum=#{unum} and jnum=#{jnum}
    </update>
</mapper>